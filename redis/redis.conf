# 데이터 디렉토리 설정
dir /data

# RDB 자동 저장 조건 조정 (너무 자주 저장되는 것 방지)
save 900 1
save 300 100
save 60 10000

# AOF 활성화 (지속성 보장)
appendonly yes
appendfsync everysec
auto-aof-rewrite-percentage 0

# 메모리 정책: 메모리 초과 시 오래된 키 제거
maxmemory-policy allkeys-lru

# 쓰기 중단 방지 설정 (RDB 오류 시에도 계속 동작)
stop-writes-on-bgsave-error no

# 클라이언트 수 제한
maxclients 10000

# 백로그 큐 설정 (커널 값과 일치해야 함)
tcp-backlog 1024

# 로그 레벨
loglevel notice